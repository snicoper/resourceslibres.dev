"use strict";function readImagePreview(e,a){var t=new FileReader;a.files&&a.files[0]&&(t.onload=function(a){$(e).attr("src",a.target.result)},t.readAsDataURL(a.files[0]))}$(document).ready(function(){function e(e){return("undefined"===a||a!==e)&&(a=e,!0)}var a=$("#favorite-vote").data("favorite-vote");$(".karma-vote-positive").on("click",function(){var a=$(this),t=$(".karma-vote-negative"),s=a.data("url"),o=a.data("message-success"),n=$(".karma-positive-value"),r=parseInt(n.html()),c=$(".karma-negative-value"),i=parseInt(c.html());e("positive")?$.ajax({method:"POST",url:s}).done(function(e){"OK"===e&&(t.removeClass("btn-danger text-white"),t.addClass("btn-outline-danger"),a.removeClass("btn-outline-success"),a.addClass("btn-success text-white"),i>0&&c.html(i-1),n.html(r+1),toastr.success(o))}):toastr.warning("Solo puedes un boto positivo.")}),$(".karma-vote-negative").on("click",function(){var a=$(this),t=$(".karma-vote-positive"),s=a.data("url"),o=a.data("message-success"),n=$(".karma-negative-value"),r=parseInt(n.html()),c=$(".karma-positive-value"),i=parseInt(c.html());e("negative")?$.ajax({method:"POST",url:s}).done(function(e){"OK"===e&&(t.removeClass("btn-success text-white"),t.addClass("btn-outline-success"),a.removeClass("btn-outline-danger"),a.addClass("btn-danger text-white"),i>0&&c.html(i-1),n.html(r+1),toastr.success(o))}):toastr.warning("Solo puedes un boto negativo.")})}),$(document).ready(function(){$(".add-resource-favorite").on("click",function(){var e=$(this),a=e.data("resource-id"),t=e.data("url"),s=e.data("message-success");$.ajax({method:"POST",url:t,data:{resource_id:a}}).done(function(a){"OK"===a&&(toastr.success(s),e.toggleClass("hidden"),e.siblings().toggleClass("hidden"))})}),$(".remove-resource-favorite").on("click",function(){var e=$(this),a=e.data("resource-id"),t=e.data("url"),s=e.data("message-success");$.ajax({method:"POST",url:t,data:{resource_id:a}}).done(function(a){"OK"===a&&(toastr.success(s),e.toggleClass("hidden"),e.siblings().toggleClass("hidden"))})})}),$(document).ready(function(){$.ajaxSetup({beforeSend:function(e,a){e.setRequestHeader("X-CSRFToken",Cookies.get("csrftoken"))}}),$(function(){$('[data-toggle="tooltip"]').tooltip()})}),$(function(){$(".anuncio-rating-stars").each(function(e,a){var t=$(this),s=1===t.data("readonly"),o=t.data("url"),n=t.data("message-text"),r=t.data("message-success");0===(a=t.data("value").replace(",","."))&&(a=-1),t.barrating({theme:"fontawesome-stars-o",initialRating:a,readonly:s,showSelectedRating:!0,onSelect:function(e,a,s){void 0!==s&&$.ajax({url:o,data:{score:e},success:function(a){if((a=parseFloat(a))>0){var s=$(".anuncio-user-score"),o=n+" "+e+' <i class="material-icons">star</i>';t.barrating("set",a),toastr.success(r),s.html(o),s.removeClass("hide")}}})}})})}),$(document).ready(function(){$(".resource-user-read").on("click",function(){var e=$(this),a=e.data("url"),t=e.data("user-has-read"),s=e.data("message-success"),o=void 0;$.ajax({method:"POST",url:a}).done(function(a){"OK"===a&&(e.addClass("hidden"),o=!0===t?".mark-has-unread":".mark-has-read",e.parent(".resource-read-unread").children(o).removeClass("hidden"),toastr.success(s))})})}),$(document).ready(function(){$("#id_select_category").change(function(){var e=$(this).find(":selected").data("redirect-to");e&&(window.location.href=e)}),$("#id_select_tag").change(function(){var e=$(this).find(":selected").data("redirect-to");e&&(window.location.href=e)}),$("#resource-broken-link").on("click",function(){var e=$(this),a=e.data("url"),t=e.data("message-success");$.ajax({type:"POST",url:a,success:function(e){"OK"===e&&toastr.success(t)}})}),$("#resource-spam-link").on("click",function(){var e=$(this),a=e.data("url"),t=e.data("message-success");$.ajax({type:"POST",url:a,success:function(e){"OK"===e&&toastr.success(t)}})}),$(".owner-broken-soluciona").on("click",function(){var e=$(this),a=e.data("resource-url"),t=e.data("message-success");$.ajax({method:"POST",url:a,success:function(a){"OK"===a&&(e.remove(),$(".resouces-broken-count").html(0),toastr.success(t))}})}),$(".superuser-spam-soluciona").on("click",function(){var e=$(this),a=e.data("resource-url"),t=e.data("message-success");$.ajax({method:"POST",url:a,success:function(a){"OK"===a&&(e.remove(),$(".resouces-broken-count").html(0),toastr.success(t))}})})}),function(){jQuery(window).scroll(function(){jQuery(this).scrollTop()>220?jQuery(".to-top").fadeIn(500):jQuery(".to-top").fadeOut(500)}),jQuery(".to-top").click(function(e){return e.preventDefault(),jQuery("html, body").animate({scrollTop:0},500),!1})}();