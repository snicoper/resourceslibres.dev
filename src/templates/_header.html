{% load staticfiles %}
{% load resources_tags %}

<nav class="navbar bg-primary navbar-inverse fixed-top nb-top">
  <!-- navbar large -->
  <ul class="nav justify-content-end hidden-md-down nb-desktop">
    <li class="nav-item mr-auto">
      <a class="navbar-brand" href="{% url 'home_page' %}">
        <img class="d-inline-block align-top"
             src="{% static 'dist/img/logo.png' %}"
             alt="{{ SITE.name }} Logo"
             height="30">
        {{ SITE.name }}
      </a>
    </li>

    <!-- todos los usuarios -->
    <li class="nav-item">
      <a class="nav-link" href="{% url 'resources:create' %}">
        <i class="material-icons">add</i> Añadir recurso
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="{% url 'contact:contact' %}">
        <i class="material-icons">contact_mail</i> Contacta
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="{% url 'search:resources' %}">
        <i class="material-icons">search</i> Buscar
      </a>
    </li><!-- end todos los usuarios -->

    {% if user.is_authenticated %}
      <!-- Usuarios autenticados -->
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle"
           href="{% url 'accounts:profile' %}"
           id="navbarDropdownMenuLink-desktop"
           data-toggle="dropdown"
           aria-haspopup="true"
           aria-expanded="false"
        >
          <i class="material-icons">person</i> {{ user.username }}
        </a>

        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink-dektop">
          <a class="dropdown-item" href="{% url 'accounts:profile' %}">
            <i class="material-icons">person</i> Mi cuenta
          </a>
          <a class="dropdown-item" href="{% url 'favorites:list' %}">
            <i class="material-icons">favorite</i> Favoritos
          </a>
          <a class="dropdown-item" href="{% url 'read:list' %}">
            <i class="material-icons">visibility</i> Leídos
          </a>
          <a class="dropdown-item" href="{% url 'resources:private_user_list' user.slug %}">
            <i class="material-icons">picture_in_picture</i> Mis recursos
          </a>
          {% if user.resource_owner.count %}
            <a class="dropdown-item" href="{% url 'resources:broken_links_owner' %}">
              <i class="material-icons">flag</i> Enlaces rotos
            </a>
          {% endif %}

          <div class="dropdown-divider"></div>

          <a class="dropdown-item" href="{% url 'authentication:logout' %}">
            <i class="material-icons">exit_to_app</i> Terminar sesión
          </a>
        </div>
      </li><!-- end Usuarios autenticados -->
    {% else %}
      <!-- Usuarios anónimos -->
      <li class="nav-item">
        <a class="nav-link" href="{% url 'authentication:login' %}">
          <i class="material-icons">person</i> Iniciar sesión
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="{% url 'authentication:register' %}">
          <i class="material-icons">person_add</i> Registro
        </a>
      </li><!-- end Usuarios anónimos -->
    {% endif %}
  </ul><!-- end navbar large -->

  <!-- navbar med and down -->
  <ul class="nav hidden-lg-up justify-content-center nb-tablet">
    <li class="nav-item dropdown mr-auto">
      <a class="nav-link dropdown-toggle"
         data-toggle="dropdown"
         href="#"
         role="button"
         aria-haspopup="true"
         aria-expanded="false"
      >
        <i class="material-icons">menu</i>
      </a>

      <div class="dropdown-menu dropdown-menu-left">
        <!-- todos los usuarios -->
        <a class="dropdown-item" href="{% url 'resources:create' %}">
          <i class="material-icons">add</i> Añadir recurso
        </a>
        <a class="dropdown-item" href="{% url 'contact:contact' %}">
          <i class="material-icons">contact_mail</i> Contacta
        </a>
        <a class="dropdown-item" href="{% url 'search:resources' %}">
          <i class="material-icons">search</i> Buscar
        </a><!-- end todos los usuarios -->

        <div class="dropdown-divider"></div>

        {% if user.is_authenticated %}<!-- Usuarios autenticados -->
          <a class="dropdown-item" href="{% url 'accounts:profile' %}">
            <i class="material-icons">person</i> Mi cuenta
          </a>
          <a class="dropdown-item" href="{% url 'favorites:list' %}">
            <i class="material-icons">favorite</i> Favoritos
          </a>
          <a class="dropdown-item" href="{% url 'read:list' %}">
            <i class="material-icons">visibility</i> Leídos
          </a>
          <a class="dropdown-item" href="{% url 'resources:private_user_list' user.slug %}">
            <i class="material-icons">picture_in_picture</i> Mis recursos
          </a>
          {% if user.resource_owner.count %}
            <a class="dropdown-item" href="{% url 'resources:broken_links_owner' %}">
              <i class="material-icons">flag</i> Enlaces rotos
            </a>
          {% endif %}

          <div class="dropdown-divider"></div>

          <a class="dropdown-item" href="{% url 'authentication:logout' %}">
            <i class="material-icons">exit_to_app</i> Terminar sesión
          </a>
        {% else %}
          <!-- Usuarios anónimos -->
          <a class="dropdown-item" href="{% url 'authentication:register' %}">
            <i class="material-icons">person_add</i> Registro
          </a>
          <a class="dropdown-item" href="{% url 'authentication:login' %}">
            <i class="material-icons">person</i> Iniciar sesión
          </a>
          <!-- end Usuarios anónimos -->
        {% endif %}
      </div>
    </li>
    <li class="nav-item mr-auto">
      <a class="navbar-brand" href="{% url 'home_page' %}">
        <img class="d-inline-block align-top"
             src="{% static 'dist/img/logo.png' %}"
             alt="{{ SITE.name }} Logo"
             height="30">
        {{ SITE.name }}
      </a>
    </li>
  </ul><!-- end navbar med and down -->
</nav>
