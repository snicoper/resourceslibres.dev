{"version":3,"sources":["main.js"],"names":["$","document","ready","favoriteVote","data","canVote","vote","on","self","elementNegative","url","messageSuccess","elementValuePositives","valuePositives","parseInt","html","elementValueNegatives","valueNegatives","toastr","warning","ajax","method","done","removeClass","addClass","success","elementPositive","resourceId","toggleClass","siblings","readImagePreview","$idTagImage","input","reader","FileReader","files","onload","e","attr","target","result","readAsDataURL","ajaxSetup","beforeSend","xhr","settings","setRequestHeader","Cookies","get","tooltip","each","index","value","readonly","messageText","replace","barrating","theme","initialRating","showSelectedRating","onSelect","text","event","score","parseFloat","htmlElement","content","hasRead","elementHide","parent","children","change","redirectTo","find","window","location","href","type","remove","offset","duration","jQuery","scroll","scrollTop","fadeIn","fadeOut","click","preventDefault","animate"],"mappings":"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","file":"main.js","sourcesContent":["/**\n * Incrementa en el karma de los usuarios.\n * src/templates/accounts/_buttons_karma.html\n */\n$(document).ready(function() {\n  // Controla el voto del usuario para no poder incrementar o decrementar\n  // mas de una vez.\n  let favoriteVote = $('#favorite-vote').data('favorite-vote');\n\n  /**\n   * Prueba si puede votar en el botón.\n   * Cambia el valor del favoriteVote a vote (no requiere cambiar el DOM).\n   *\n   * @param  {string} vote negative|positive\n   * @return {bool} true en caso de poder votar, false en caso contrario.\n   */\n  function canVote(vote) {\n    // Si es undefined, es que aun no ha votado.\n    if (favoriteVote !== 'undefined' && favoriteVote === vote) {\n      return false;\n    }\n\n    // Cambiar el valor de favoriteVote.\n    favoriteVote = vote;\n\n    return true;\n  }\n\n  $('.karma-vote-positive').on('click', function() {\n    const self = $(this);\n    const elementNegative = $('.karma-vote-negative');\n    const url = self.data('url');\n    const messageSuccess = self.data('message-success');\n    const elementValuePositives = $('.karma-positive-value');\n    const valuePositives = parseInt(elementValuePositives.html());\n    const elementValueNegatives = $('.karma-negative-value');\n    const valueNegatives = parseInt(elementValueNegatives.html());\n\n    // Comprueba si puede votar.\n    if (!canVote('positive')) {\n      toastr.warning('Solo puedes un boto positivo.');\n      return;\n    }\n\n    $.ajax({\n      method: 'POST',\n      url: url\n    }).done(function(data) {\n      if (data === 'OK') {\n        // Asegurarse de quitar bg-danger en la class de negative.\n        elementNegative.removeClass('btn-danger text-white');\n        elementNegative.addClass('btn-outline-danger');\n        self.removeClass('btn-outline-success');\n        self.addClass('btn-success text-white');\n\n        // Incrementar el contador en 1 en positive y decrementar en 1 en negative.\n        if (valueNegatives > 0) {\n          elementValueNegatives.html(valueNegatives - 1);\n        }\n        elementValuePositives.html(valuePositives + 1);\n\n        // Mostrar mensaje.\n        toastr.success(messageSuccess);\n      }\n    });\n  });\n\n  $('.karma-vote-negative').on('click', function() {\n    const self = $(this);\n    const elementPositive = $('.karma-vote-positive');\n    const url = self.data('url');\n    const messageSuccess = self.data('message-success');\n    const elementValueNegatives = $('.karma-negative-value');\n    const valueNegatives = parseInt(elementValueNegatives.html());\n    const elementValuePositives = $('.karma-positive-value');\n    const valuePositives = parseInt(elementValuePositives.html());\n\n    // Comprueba si puede votar.\n    if (!canVote('negative')) {\n      toastr.warning('Solo puedes un boto negativo.');\n      return;\n    }\n\n    $.ajax({\n      method: 'POST',\n      url: url\n    }).done(function(data) {\n      if (data === 'OK') {\n        // Asegurarse de quitar bg-success en la class de positive.\n        elementPositive.removeClass('btn-success text-white');\n        elementPositive.addClass('btn-outline-success');\n        self.removeClass('btn-outline-danger');\n        self.addClass('btn-danger text-white');\n\n        // Incrementar el contador en 1 en negative y decrementar en 1 en positive.\n        if (valuePositives > 0) {\n          elementValuePositives.html(valuePositives - 1);\n        }\n        elementValueNegatives.html(valueNegatives + 1);\n\n        // Mostrar mensaje.\n        toastr.success(messageSuccess);\n      }\n    });\n  });\n});\n\n$(document).ready(function() {\n  /**\n   * Añade un resource a favoritos via AJAX.\n   *\n   * src/templates/favorites/_heart_favorite.html\n   */\n  $('.add-resource-favorite').on('click', function() {\n    const self = $(this);\n    const resourceId = self.data('resource-id');\n    const url = self.data('url');\n    const messageSuccess = self.data('message-success');\n\n    $.ajax({\n      method: 'POST',\n      url: url,\n      data: {'resource_id': resourceId}\n    })\n    .done(function(data) {\n      if (data === 'OK') {\n        toastr.success(messageSuccess);\n        self.toggleClass('hidden');\n        self.siblings().toggleClass('hidden');\n      }\n    });\n  });\n\n  /**\n   * Elimina un resource de favoritos via AJAX.\n   *\n   * src/templates/favorites/_heart_favorite.html\n   */\n  $('.remove-resource-favorite').on('click', function() {\n    const self = $(this);\n    const resourceId = self.data('resource-id');\n    const url = self.data('url');\n    const messageSuccess = self.data('message-success');\n\n    $.ajax({\n      method: 'POST',\n      url: url,\n      data: {'resource_id': resourceId}\n    })\n    .done(function(data) {\n      if (data === 'OK') {\n        toastr.success(messageSuccess);\n        self.toggleClass('hidden');\n        self.siblings().toggleClass('hidden');\n      }\n    });\n  });\n});\n\n/**\n * Carga una imagen de un input type file para mostrarla\n * en un elemento <img>\n * @param  {str} $idTagImage id en la etiqueta <img id=\"\"> con formato Jquery #my-id-tag\n * @param  {str} input       Elemento del input\n *\n * $(\"#id_avatar\").change(function(){\n *   readImagePreview('#img-avatar', this);\n * });\n *\n * #id_avatar es el campo type field.\n * #img-avatar es el id del elemento <img>\n */\nfunction readImagePreview($idTagImage, input) { // eslint-disable-line no-unused-vars\n  const reader = new FileReader();\n\n  if (input.files && input.files[0]) {\n    reader.onload = function(e) {\n      $($idTagImage).attr('src', e.target.result);\n    };\n    reader.readAsDataURL(input.files[0]);\n  }\n}\n\n$(document).ready(function() {\n  // CSRF TOKEN DJANGO\n  $.ajaxSetup({\n    beforeSend: function(xhr, settings) { // eslint-disable-line no-unused-vars\n      xhr.setRequestHeader('X-CSRFToken', Cookies.get('csrftoken'));\n    }\n  });\n\n  // tooltip por defecto.\n  $(function() {\n    $('[data-toggle=\"tooltip\"]').tooltip();\n  });\n});\n\n/**\n * Estrellas con el ratio del resource.\n */\n$(function() {\n  $('.anuncio-rating-stars').each(function(index, value) {\n    const self = $(this);\n    const readonly = self.data('readonly') === 1;\n    const url = self.data('url');\n    const messageText = self.data('message-text');\n    const messageSuccess = self.data('message-success');\n\n    // En Spanish por ejemplo, separa los decimales con comas.\n    value = self.data('value').replace(',', '.');\n\n    // El valor por defecto en caso de no tener votos, es de -1 para que no\n    // muestre ninguna estrella.\n    if (value === 0) {\n      value = -1;\n    }\n\n    self.barrating({\n      theme: 'fontawesome-stars-o',\n      initialRating: value,\n      readonly: readonly,\n      showSelectedRating: true,\n\n      onSelect(value, text, event) {\n        if (typeof(event) !== 'undefined') {\n          $.ajax({\n            url: url,\n            data: {score: value},\n            success(data) {\n              data = parseFloat(data);\n              if (data > 0) {\n                const htmlElement = $('.anuncio-user-score');\n                const content = `${messageText} ${value} <i class=\"material-icons\">star</i>`;\n\n                // Actualizar el ratio.\n                self.barrating('set', data);\n                toastr.success(messageSuccess);\n\n                // Actualizar el score del usuario.\n                htmlElement.html(content);\n                htmlElement.removeClass('hide');\n              }\n            }\n          });\n        }\n      }\n    });\n  });\n});\n\n/**\n * Un usuario marca un recurso como leído/no leído.\n * src/templates/read/_resource_read_unread.html\n */\n$(document).ready(function() {\n  $('.resource-user-read').on('click', function() {\n    const self = $(this);\n    const url = self.data('url');\n    const hasRead = self.data('user-has-read');\n    const messageSuccess = self.data('message-success');\n    let elementHide;\n\n    $.ajax({\n      method: 'POST',\n      url: url\n    }).done(function(data) {\n      if (data === 'OK') {\n        self.addClass('hidden');\n\n        if (hasRead === true) {\n          elementHide = '.mark-has-unread';\n        } else {\n          elementHide = '.mark-has-read';\n        }\n\n        self.parent('.resource-read-unread').children(elementHide).removeClass('hidden');\n        toastr.success(messageSuccess);\n      }\n    });\n  });\n});\n\n$(document).ready(function() {\n  /**\n   * Selects de categorías y tags, cuando cambia el valor,\n   * la pagina redirecciona al la cat/tag seleccionadas.\n   *\n   * src/templates/resources/_nav_list.html\n   */\n  // categories\n  $('#id_select_category').change(function() {\n    const redirectTo = $(this).find(':selected').data('redirect-to');\n    if (redirectTo) {\n      window.location.href = redirectTo;\n    }\n  });\n\n  // Tags\n  $('#id_select_tag').change(function() {\n    const redirectTo = $(this).find(':selected').data('redirect-to');\n    if (redirectTo) {\n      window.location.href = redirectTo;\n    }\n  });\n\n  /**\n   * Marcar un link de resource como roto.\n   *\n   * src/templates/resources/details.html\n   */\n  $('#resource-broken-link').on('click', function() {\n    const self = $(this);\n    const url = self.data('url');\n    const messageSuccess = self.data('message-success');\n\n    $.ajax({\n      type: 'POST',\n      url: url,\n\n      success: function(data) {\n        if (data === 'OK') {\n          toastr.success(messageSuccess);\n        }\n      }\n    });\n  });\n\n  /**\n   * Marcar un link de resource como spam.\n   *\n   * src/templates/resources/details.html\n   */\n  $('#resource-spam-link').on('click', function() {\n    const self = $(this);\n    const url = self.data('url');\n    const messageSuccess = self.data('message-success');\n\n    $.ajax({\n      type: 'POST',\n      url: url,\n\n      success: function(data) {\n        if (data === 'OK') {\n          toastr.success(messageSuccess);\n        }\n      }\n    });\n  });\n\n  /**\n   * El owner de un Resource limpia los links marcados como rotos.\n   *\n   * src/templates/resources/_resource_owner_info.html\n   */\n  $('.owner-broken-soluciona').on('click', function() {\n    const self = $(this);\n    const url = self.data('resource-url');\n    const messageSuccess = self.data('message-success');\n\n    $.ajax({\n      method: 'POST',\n      url: url,\n\n      success: function(data) {\n        if (data === 'OK') {\n          self.remove();\n          $('.resouces-broken-count').html(0);\n          toastr.success(messageSuccess);\n        }\n      }\n    });\n  });\n\n  /**\n   * El superuser limpia los links marcados como spam.\n   *\n   * src/templates/resources/list_spam_links.html\n   */\n  $('.superuser-spam-soluciona').on('click', function() {\n    const self = $(this);\n    const url = self.data('resource-url');\n    const messageSuccess = self.data('message-success');\n\n    $.ajax({\n      method: 'POST',\n      url: url,\n\n      success: function(data) {\n        if (data === 'OK') {\n          self.remove();\n          $('.resouces-broken-count').html(0);\n          toastr.success(messageSuccess);\n        }\n      }\n    });\n  });\n});\n\n// to-top\n(function() {\n  const offset = 220;\n  const duration = 500;\n\n  jQuery(window).scroll(function() {\n    if (jQuery(this).scrollTop() > offset) {\n      jQuery('.to-top').fadeIn(duration);\n    } else {\n      jQuery('.to-top').fadeOut(duration);\n    }\n  });\n\n  jQuery('.to-top').click(function(event) {\n    event.preventDefault();\n    jQuery('html, body').animate({scrollTop: 0}, duration);\n    return false;\n  });\n})();\n"]}